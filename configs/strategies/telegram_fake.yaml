# Telegram Fake Strategy - альтернативная стратегия для Telegram
# Использует fake пакеты с автогенерацией TLS для обхода DPI
id: "zapret_telegram_fake"
name: "Telegram Fake"
description: "Стратегия с fake TLS пакетами для Telegram"
family: sni_frag
engine: zapret

mode_capabilities:
  supports_socks: false
  supports_global: true

global_template:
  binary: "binaries/winws.exe"
  args:
    # WinDivert фильтры
    - "--wf-tcp=80,443"
    - "--wf-udp=443"
    # QUIC fake для Telegram (MTProto over QUIC)
    - "--filter-udp=443"
    - "--hostlist=hostlists/telegram.txt"
    - "--dpi-desync=fake"
    - "--dpi-desync-repeats=11"
    - "--dpi-desync-fake-quic=binaries/quic_initial_www_google_com.bin"
    - "--new"
    # TCP fake+multidisorder с автогенерацией TLS
    - "--filter-tcp=443"
    - "--hostlist=hostlists/telegram.txt"
    - "--dpi-desync=fake,multidisorder"
    - "--dpi-desync-split-pos=1,midsld"
    - "--dpi-desync-repeats=11"
    - "--dpi-desync-fooling=badseq"
    - "--dpi-desync-fake-tls=0x00000000"
    - "--dpi-desync-fake-tls-mod=rnd,dupsid,sni=www.google.com"
    - "--new"
    # HTTP fallback
    - "--filter-tcp=80"
    - "--hostlist=hostlists/telegram.txt"
    - "--dpi-desync=fake,multidisorder"
    - "--dpi-desync-split-pos=1,midsld"
    - "--dpi-desync-repeats=11"
    - "--dpi-desync-fooling=badseq"
  env: {}
  requires_admin: true

requirements:
  min_rights: "admin"
  os:
    - windows
  binaries:
    - "binaries/winws.exe"
    - "binaries/WinDivert64.sys"
    - "binaries/quic_initial_www_google_com.bin"

weight_hint: 11
services:
  - telegram
