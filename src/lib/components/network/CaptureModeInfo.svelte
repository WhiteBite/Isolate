<script lang="ts">
  interface Props {
    mode: 'system' | 'tun';
    expanded?: boolean;
  }

  let { mode, expanded = false }: Props = $props();
  
  let isExpanded = $state(expanded);
</script>

<div class="mt-2">
  <!-- Toggle button -->
  <button
    type="button"
    onclick={() => isExpanded = !isExpanded}
    class="flex items-center gap-1.5 text-xs text-zinc-500 hover:text-zinc-400 transition-colors"
  >
    <svg 
      class="w-3.5 h-3.5 transition-transform duration-200 {isExpanded ? 'rotate-180' : ''}" 
      fill="none" 
      viewBox="0 0 24 24" 
      stroke="currentColor"
    >
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
    </svg>
    <span>–ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç?</span>
  </button>

  <!-- Info panel -->
  {#if isExpanded}
    <div class="mt-2 p-3 bg-zinc-900/50 rounded-lg border border-white/5 text-xs space-y-3 animate-in fade-in slide-in-from-top-1 duration-200">
      <!-- TUN Mode -->
      <div class="space-y-1.5">
        <div class="flex items-center gap-2">
          <span class="text-sm">üõ°Ô∏è</span>
          <span class="font-medium text-zinc-300">TUN Driver</span>
          {#if mode === 'tun'}
            <span class="px-1.5 py-0.5 bg-emerald-500/20 text-emerald-400 rounded text-[10px] font-medium">–í—ã–±—Ä–∞–Ω</span>
          {/if}
        </div>
        <p class="text-zinc-500 leading-relaxed pl-6">
          –ü–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç <span class="text-zinc-400">–≤–µ—Å—å —Å–µ—Ç–µ–≤–æ–π —Ç—Ä–∞—Ñ–∏–∫</span> –Ω–∞ —É—Ä–æ–≤–Ω–µ –¥—Ä–∞–π–≤–µ—Ä–∞. 
          –†–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –≤—Å–µ—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π, –≤–∫–ª—é—á–∞—è –∏–≥—Ä—ã, —Ç–æ—Ä—Ä–µ–Ω—Ç—ã –∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã –±–µ–∑ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –ø—Ä–æ–∫—Å–∏.
        </p>
        <div class="pl-6 flex flex-wrap gap-1.5">
          <span class="px-1.5 py-0.5 bg-emerald-500/10 text-emerald-400/80 rounded text-[10px]">‚úì –í—Å–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</span>
          <span class="px-1.5 py-0.5 bg-emerald-500/10 text-emerald-400/80 rounded text-[10px]">‚úì –ò–≥—Ä—ã</span>
          <span class="px-1.5 py-0.5 bg-emerald-500/10 text-emerald-400/80 rounded text-[10px]">‚úì UDP —Ç—Ä–∞—Ñ–∏–∫</span>
        </div>
      </div>

      <!-- System Proxy Mode -->
      <div class="space-y-1.5">
        <div class="flex items-center gap-2">
          <span class="text-sm">üåç</span>
          <span class="font-medium text-zinc-300">System Proxy</span>
          {#if mode === 'system'}
            <span class="px-1.5 py-0.5 bg-emerald-500/20 text-emerald-400 rounded text-[10px] font-medium">–í—ã–±—Ä–∞–Ω</span>
          {/if}
        </div>
        <p class="text-zinc-500 leading-relaxed pl-6">
          –ò—Å–ø–æ–ª—å–∑—É–µ—Ç <span class="text-zinc-400">—Å–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–∫—Å–∏</span>. 
          –†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–∫—Å–∏ (–±—Ä–∞—É–∑–µ—Ä—ã, –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä—ã).
        </p>
        <div class="pl-6 flex flex-wrap gap-1.5">
          <span class="px-1.5 py-0.5 bg-blue-500/10 text-blue-400/80 rounded text-[10px]">‚úì –ë—Ä–∞—É–∑–µ—Ä—ã</span>
          <span class="px-1.5 py-0.5 bg-blue-500/10 text-blue-400/80 rounded text-[10px]">‚úì –õ–µ–≥—á–µ –¥–ª—è —Å–∏—Å—Ç–µ–º—ã</span>
          <span class="px-1.5 py-0.5 bg-amber-500/10 text-amber-400/80 rounded text-[10px]">‚ö† –ù–µ –≤—Å–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</span>
        </div>
      </div>

      <!-- Recommendation -->
      <div class="pt-2 border-t border-white/5">
        <p class="text-zinc-500 leading-relaxed">
          <span class="text-zinc-400 font-medium">üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:</span> 
          –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ <span class="text-zinc-300">TUN</span> –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –ø–æ–∫—Ä—ã—Ç–∏—è, 
          <span class="text-zinc-300">System Proxy</span> ‚Äî –µ—Å–ª–∏ –Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ –±—Ä–∞—É–∑–µ—Ä –∏–ª–∏ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –ø—Ä–æ–±–ª–µ–º—ã —Å TUN.
        </p>
      </div>

      <!-- Warning -->
      <div class="p-2 bg-amber-500/5 border border-amber-500/10 rounded">
        <p class="text-amber-400/80 leading-relaxed">
          <span class="font-medium">‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ:</span> 
          TUN —Ä–µ–∂–∏–º —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –∏ –º–æ–∂–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞—Ç—å —Å VPN –∏–ª–∏ –∞–Ω—Ç–∏–≤–∏—Ä—É—Å–∞–º–∏.
        </p>
      </div>
    </div>
  {/if}
</div>
